<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Carta para Tais ðŸ’–</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400;600;700&display=swap');
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Pixelify Sans',system-ui,sans-serif;background:#0f0f1a;color:#fff;overflow-x:hidden}

    .intro{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:radial-gradient(circle at center,#1b1b2f 0%,#0f0f1a 60%);z-index:9999}
    .letter-img{width:70vw;max-width:260px;image-rendering:pixelated;cursor:pointer;animation:pulse 1.6s ease-in-out infinite}
    .tap-text{margin-top:14px;font-size:1.05rem;font-weight:600;opacity:.9;animation:blink 1.8s ease-in-out infinite}

    .container{max-width:420px;margin:auto;padding:20px;text-align:center;display:none}
    h1{font-size:1.8rem;margin-bottom:15px;font-weight:700}

    .carousel{position:relative;width:100%;overflow:hidden;border-radius:12px;box-shadow:0 0 20px rgba(255,105,180,.3)}
    .slides{display:flex;transition:transform .5s ease-in-out}
    .slide{min-width:100%;padding:10px}
    .slide img{width:100%;image-rendering:pixelated;border-radius:10px}

    .controls{display:flex;justify-content:space-between;margin-top:10px}
    button{background:#ff69b4;border:none;padding:10px 16px;border-radius:8px;font-family:inherit;font-weight:700;cursor:pointer;color:#000}

    .volume-box{display:flex;align-items:center;gap:10px;margin:16px auto 0;max-width:260px;justify-content:center}
    #volumeSlider{width:100%;height:8px;border-radius:8px;outline:none;accent-color:#ff69b4}

    .float-img{position:fixed;pointer-events:none;animation:float 6s linear infinite;image-rendering:pixelated;background-size:contain;background-repeat:no-repeat;background-position:center}

    @keyframes float{from{transform:translate(-50%,100vh);opacity:1}to{transform:translate(-50%,-10vh);opacity:0}}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
    @keyframes blink{0%,100%{opacity:.4}50%{opacity:1}}

    footer{margin-top:20px;font-size:.95rem;opacity:.85;font-weight:600}
  </style>
</head>
<body>

  <div id="intro" class="intro">
    <img src="cartapixelart.png" alt="Abrir carta" class="letter-img" id="letterBtn" />
    <p class="tap-text">TocÃ¡ la carta para abrir ðŸ’Œ</p>
  </div>

  <div class="container" id="mainContent">
    <h1>Un regalo hecho con todo mi corazÃ³n ðŸ’•</h1>

    <div class="carousel">
      <div class="slides" id="slides">
        <div class="slide"><img src="img1.png" alt=""></div>
        <div class="slide"><img src="img2.png" alt=""></div>
        <div class="slide"><img src="img3.png" alt=""></div>
      </div>
    </div>

    <div class="controls">
      <button id="prevBtn">â—€</button>
      <button id="nextBtn">â–¶</button>
    </div>

    <div class="volume-box">
      <span>ðŸ”Š</span>
      <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.7" />
    </div>

    <footer>Con amor, de Val âœ¨</footer>
  </div>

  <audio id="bgMusic" src="musica.mp3" preload="auto" playsinline></audio>

  <script>
    var intro = document.getElementById('intro');
    var main = document.getElementById('mainContent');
    var letterBtn = document.getElementById('letterBtn');
    var audio = document.getElementById('bgMusic');
    var slider = document.getElementById('volumeSlider');
    var unlocked = false;

    function unlockAudio(){
      if(unlocked) return;
      audio.muted = true;
      audio.play().then(function(){
        audio.pause();
        audio.currentTime = 0;
        audio.muted = false;
        unlocked = true;
      }).catch(function(){});
    }

    function playMusic(){
      unlockAudio();
      audio.currentTime = 0;
      audio.volume = slider.value;
      audio.play().catch(function(){});
    }

    letterBtn.addEventListener('click', openLetter);
    letterBtn.addEventListener('touchend', function(e){ e.preventDefault(); openLetter(); });

    function openLetter(){
      intro.style.display = 'none';
      main.style.display = 'block';
      playMusic();
    }

    document.addEventListener('touchend', function(){ playMusic(); }, { once:true });
    document.addEventListener('click', function(){ playMusic(); }, { once:true });

    var slides = document.getElementById('slides');
    var prevBtn = document.getElementById('prevBtn');
    var nextBtn = document.getElementById('nextBtn');
    var index = 0;

    function update(){ slides.style.transform = 'translateX(-' + (index*100) + '%)'; }

    prevBtn.onclick = function(){ index = (index - 1 + slides.children.length) % slides.children.length; update(); };
    nextBtn.onclick = function(){ index = (index + 1) % slides.children.length; update(); };

    slider.oninput = function(){ audio.volume = this.value; };

    var FLOAT_IMAGES = ['imagenflotante1.png','imagenflotante2.png','imagenflotante3.png'];

    setInterval(function(){
      var el = document.createElement('div');
      el.className = 'float-img';
      el.style.backgroundImage = 'url(' + FLOAT_IMAGES[Math.floor(Math.random()*FLOAT_IMAGES.length)] + ')';
      var offset = (Math.random()*24) - 12;
      el.style.left = 'calc(50vw + ' + offset + 'vw)';
      var size = 18 + Math.random()*18;
      el.style.width = size + 'px';
      el.style.height = size + 'px';
      document.body.appendChild(el);
      setTimeout(function(){ el.remove(); },6000);
    },900);
(function(){
      var el = document.createElement('div');
      el.className = 'float-img';
      el.style.backgroundImage = 'url(' + FLOAT_IMAGES[Math.floor(Math.random()*FLOAT_IMAGES.length)] + ')';
      var offset = (Math.random()*24) - 12;
      el.style.left = 'calc(50vw + ' + offset + 'vw)';
      var size = 18 + Math.random()*18;
      el.style.width = size + 'px';
      el.style.height = size + 'px';
      document.body.appendChild(el);
      setTimeout(function(){ el.remove(); },6000);
    },900);
  </script>
</body>
</html>

